"use strict";(()=>{var e={};e.id=881,e.ids=[881],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4324:(e,t,s)=>{let r;s.r(t),s.d(t,{originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>h,serverHooks:()=>k,staticGenerationAsyncStorage:()=>g});var o={};s.r(o),s.d(o,{GET:()=>d,POST:()=>l});var a=s(9303),i=s(8716),n=s(670);let u=require("mongodb"),c=process.env.MONGODB_URI;if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");r=new u.MongoClient(c,{}).connect();var p=s(7070);async function d(e){try{let e=await r;console.log("Connected to MongoDB successfully");let t=e.db("MitschWebsite").collection("Haikus"),s=await t.find({}).toArray();return p.NextResponse.json(s||[],{status:200})}catch(e){return console.error("Error in GET /api/haikus:",e),p.NextResponse.json({message:"Error fetching haikus"},{status:500})}}async function l(e){try{let t=(await r).db("MitschWebsite").collection("Haikus"),{haiku:s}=await e.json();if(!s)return p.NextResponse.json({message:"Haiku cannot be empty"},{status:400});return await t.insertOne({haiku:s}),p.NextResponse.json({message:"Haiku added",haiku:s},{status:200})}catch(e){return console.error("Error in POST /api/haikus:",e),p.NextResponse.json({message:"Error adding haiku"},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/haikus/route",pathname:"/api/haikus",filename:"route",bundlePath:"app/api/haikus/route"},resolvedPagePath:"/Users/miriamschwartz/_miRi/2024_Hamburg-Coding-School/mitsch-website/mitsch-website/app/api/haikus/route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:k}=h,x="/api/haikus/route";function v(){return(0,n.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,972],()=>s(4324));module.exports=r})();